{"ast":null,"code":"import _slicedToArray from\"C:\\\\inetpub\\\\wwwroot\\\\Thesis-Project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import _ from\"lodash\";import{View}from\"react-native\";import\"./homepage.css\";import{DisclosureAndDirectionsComp}from\"../../components/DisclosureAndDirectionsComp\";import{MainPageComp}from\"../../components/MainPageComp\";import{SurveyPageComp}from\"../../components/SurveyPageComp\";const breakfast_recipes=require(\"./../../data/breakfast_recipes.json\");const dessert_recipes=require(\"./../../data/dessert_recipes.json\");const dinner_recipes=require(\"./../../data/dinner_recipes.json\");const gluten_free_recipes=require(\"./../../data/gluten_free_recipes.json\");const side_recipes=require(\"./../../data/side_recipes.json\");export const HomePage=()=>{const _useState=useState([]),_useState2=_slicedToArray(_useState,2),allRecipes=_useState2[0],setRecipes=_useState2[1];const _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),mainRecipes=_useState4[0],setMainRecipes=_useState4[1];let _useState5=useState(),_useState6=_slicedToArray(_useState5,2),currentRecipe=_useState6[0],setCurrentRecipe=_useState6[1];let _useState7=useState(),_useState8=_slicedToArray(_useState7,2),tempCurrentRecipe=_useState8[0],setTempCurrentRecipe=_useState8[1];let _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),groupId=_useState10[0],setGroupId=_useState10[1];let _useState11=useState(-1),_useState12=_slicedToArray(_useState11,2),index=_useState12[0],setIndex=_useState12[1];let _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),directionsAccepted=_useState14[0],setDirectionsAccepted=_useState14[1];let _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),similar_recipes=_useState16[0],setSimilarRecipes=_useState16[1];let _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),certain_recipes=_useState18[0],setCertainRecipes=_useState18[1];let _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),uncertain_recipes=_useState20[0],setUncertainRecipes=_useState20[1];const handleClick=rcp=>{if(index===1)setTempCurrentRecipe(rcp);else if(index===0)setCurrentRecipe(rcp);if(rcp.most_similar.length>0){setSimilarRecipes(_.filter(allRecipes,rcp=>{return currentRecipe?currentRecipe.most_similar.includes(rcp.id):false;}));setCertainRecipes(_.filter(similar_recipes,rcp=>{return rcp.type===\"certain\";}));setUncertainRecipes(_.filter(similar_recipes,rcp=>{return rcp.type===\"uncertain\";}));}};const handleSubmit=event=>{setIndex(0);};const selectRecipeClick=()=>{let temp=++index;if(temp===1)setTempCurrentRecipe(currentRecipe);if(temp>1){temp=0;setGroupId(++groupId);if(groupId===5)temp=2;}setIndex(temp);};const directionsCheckboxChange=event=>{setDirectionsAccepted(event.target.checked);};const submitSurvey=event=>{selectRecipeClick();};const refresh=()=>{let recipes=[];if(groupId===0)recipes=breakfast_recipes;else if(groupId===1)recipes=dessert_recipes;else if(groupId===2)recipes=dinner_recipes;else if(groupId===3)recipes=gluten_free_recipes;else if(groupId===4)recipes=side_recipes;setRecipes(recipes);let mainRecipes=_.filter(recipes,recipe=>{return recipe.type===\"main\";});setMainRecipes(mainRecipes);setCurrentRecipe(mainRecipes[0]);if(currentRecipe&&currentRecipe.most_similar.length>0){setSimilarRecipes(_.filter(recipes,rcp=>{console.log(rcp.id);console.log(currentRecipe?currentRecipe.most_similar.includes(rcp.id):false);return currentRecipe?currentRecipe.most_similar.includes(rcp.id):false;}));setCertainRecipes(_.filter(similar_recipes,rcp=>{return rcp.type===\"certain\";}));setUncertainRecipes(_.filter(similar_recipes,rcp=>{return rcp.type===\"uncertain\";}));}};useEffect(()=>{refresh();},[]);useEffect(()=>{refresh();},[directionsAccepted,index]);return index===-1?/*#__PURE__*/React.createElement(DisclosureAndDirectionsComp,{directionsAccepted:directionsAccepted,directionsCheckboxChange:directionsCheckboxChange,handleSubmit:handleSubmit,refresh:refresh}):currentRecipe?index===0?/*#__PURE__*/React.createElement(MainPageComp,{currentRecipe:currentRecipe,handleClick:handleClick,mainRecipes:mainRecipes,selectRecipeClick:selectRecipeClick}):index===1?/*#__PURE__*/React.createElement(SurveyPageComp,{allRecipes:allRecipes,currentRecipe:currentRecipe,handleClick:handleClick,similarRecipes:similar_recipes,submitSurvey:submitSurvey,tempCurrentRecipe:tempCurrentRecipe?tempCurrentRecipe:currentRecipe}):index===2?/*#__PURE__*/React.createElement(View,null,/*#__PURE__*/React.createElement(\"span\",null,\"Thank you for participating!\")):/*#__PURE__*/React.createElement(\"div\",null,\"Current Recipe isn't set. Please contact Carson (385) 244-6611\"):/*#__PURE__*/React.createElement(\"div\",null,\"Index doesn't equal -1. Please contact Carson (385) 244-6611\");};export default HomePage;","map":{"version":3,"sources":["C:/inetpub/wwwroot/Thesis-Project/src/views/HomePage/HomePage.tsx"],"names":["React","useEffect","useState","_","View","DisclosureAndDirectionsComp","MainPageComp","SurveyPageComp","breakfast_recipes","require","dessert_recipes","dinner_recipes","gluten_free_recipes","side_recipes","HomePage","allRecipes","setRecipes","mainRecipes","setMainRecipes","currentRecipe","setCurrentRecipe","tempCurrentRecipe","setTempCurrentRecipe","groupId","setGroupId","index","setIndex","directionsAccepted","setDirectionsAccepted","similar_recipes","setSimilarRecipes","certain_recipes","setCertainRecipes","uncertain_recipes","setUncertainRecipes","handleClick","rcp","most_similar","length","filter","includes","id","type","handleSubmit","event","selectRecipeClick","temp","directionsCheckboxChange","target","checked","submitSurvey","refresh","recipes","recipe","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport _ from \"lodash\";\r\nimport { View, Button } from \"react-native\";\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardBody,\r\n  Col,\r\n  CardImg,\r\n  Row,\r\n} from \"reactstrap\";\r\nimport { RecipeComp } from \"./../../components/RecipeComp\";\r\nimport { SurveyComp } from \"../../components/SurveyComp\";\r\nimport \"./homepage.css\";\r\nimport { DisclosureAndDirectionsComp } from \"../../components/DisclosureAndDirectionsComp\";\r\nimport { MainPageComp } from \"../../components/MainPageComp\";\r\nimport { SurveyPageComp } from \"../../components/SurveyPageComp\";\r\n\r\nexport interface Recipe {\r\n  id: number;\r\n  type: string;\r\n  recipe: string;\r\n  title: string;\r\n  most_similar: [number];\r\n  ratings: number;\r\n  stars: number;\r\n  image: string;\r\n  ingredients: [string];\r\n  directions: [string];\r\n}\r\n\r\nconst breakfast_recipes = require(\"./../../data/breakfast_recipes.json\");\r\nconst dessert_recipes = require(\"./../../data/dessert_recipes.json\");\r\nconst dinner_recipes = require(\"./../../data/dinner_recipes.json\");\r\nconst gluten_free_recipes = require(\"./../../data/gluten_free_recipes.json\");\r\nconst side_recipes = require(\"./../../data/side_recipes.json\");\r\n\r\nexport const HomePage: React.FC = () => {\r\n  const [allRecipes, setRecipes] = useState<Recipe[]>([]);\r\n  const [mainRecipes, setMainRecipes] = useState<Recipe[]>([]);\r\n  let [currentRecipe, setCurrentRecipe] = useState<Recipe>();\r\n  let [tempCurrentRecipe, setTempCurrentRecipe] = useState<Recipe>();\r\n  let [groupId, setGroupId] = useState(0);\r\n  let [index, setIndex] = useState(-1);\r\n  let [directionsAccepted, setDirectionsAccepted] = useState(false);\r\n\r\n  let [similar_recipes, setSimilarRecipes] = useState<Recipe[]>([]);\r\n  let [certain_recipes, setCertainRecipes] = useState<Recipe[]>([]);\r\n  let [uncertain_recipes, setUncertainRecipes] = useState<Recipe[]>([]);\r\n\r\n  interface Recipe {\r\n    id: number;\r\n    type: string;\r\n    recipe: string;\r\n    title: string;\r\n    most_similar: [number];\r\n    ratings: number;\r\n    stars: number;\r\n    image: string;\r\n    ingredients: [string];\r\n    directions: [string];\r\n  }\r\n\r\n  const handleClick = (rcp: Recipe) => {\r\n    if (index === 1) setTempCurrentRecipe(rcp);\r\n    else if (index === 0) setCurrentRecipe(rcp);\r\n    if (rcp.most_similar.length > 0) {\r\n      setSimilarRecipes(\r\n        _.filter(allRecipes, (rcp: Recipe) => {\r\n          return currentRecipe\r\n            ? currentRecipe.most_similar.includes(rcp.id)\r\n            : false;\r\n        })\r\n      );\r\n      setCertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"certain\";\r\n        })\r\n      );\r\n      setUncertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"uncertain\";\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (event: any) => {\r\n    setIndex(0);\r\n  };\r\n\r\n  const selectRecipeClick = () => {\r\n    let temp = ++index;\r\n    if (temp === 1) setTempCurrentRecipe(currentRecipe);\r\n    if (temp > 1) {\r\n      temp = 0;\r\n      setGroupId(++groupId);\r\n      if (groupId === 5) temp = 2;\r\n    }\r\n    setIndex(temp);\r\n  };\r\n\r\n  const directionsCheckboxChange = (event: any) => {\r\n    setDirectionsAccepted(event.target.checked);\r\n  };\r\n\r\n  const submitSurvey = (event: any) => {\r\n    selectRecipeClick();\r\n  };\r\n\r\n  const refresh = () => {\r\n    let recipes: Recipe[] = [];\r\n\r\n    if (groupId === 0) recipes = breakfast_recipes;\r\n    else if (groupId === 1) recipes = dessert_recipes;\r\n    else if (groupId === 2) recipes = dinner_recipes;\r\n    else if (groupId === 3) recipes = gluten_free_recipes;\r\n    else if (groupId === 4) recipes = side_recipes;\r\n\r\n    setRecipes(recipes);\r\n\r\n    let mainRecipes = _.filter(recipes, (recipe: Recipe) => {\r\n      return recipe.type === \"main\";\r\n    });\r\n\r\n    setMainRecipes(mainRecipes);\r\n    setCurrentRecipe(mainRecipes[0]);\r\n\r\n    if (currentRecipe && currentRecipe.most_similar.length > 0) {\r\n      setSimilarRecipes(\r\n        _.filter(recipes, (rcp: Recipe) => {\r\n          console.log(rcp.id);\r\n          console.log(\r\n            currentRecipe ? currentRecipe.most_similar.includes(rcp.id) : false\r\n          );\r\n          return currentRecipe\r\n            ? currentRecipe.most_similar.includes(rcp.id)\r\n            : false;\r\n        })\r\n      );\r\n      setCertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"certain\";\r\n        })\r\n      );\r\n      setUncertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"uncertain\";\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, [directionsAccepted, index]);\r\n\r\n  return index === -1 ? (\r\n    <DisclosureAndDirectionsComp\r\n      directionsAccepted={directionsAccepted}\r\n      directionsCheckboxChange={directionsCheckboxChange}\r\n      handleSubmit={handleSubmit}\r\n      refresh={refresh}\r\n    />\r\n  ) : currentRecipe ? (\r\n    index === 0 ? (\r\n      <MainPageComp\r\n        currentRecipe={currentRecipe}\r\n        handleClick={handleClick}\r\n        mainRecipes={mainRecipes}\r\n        selectRecipeClick={selectRecipeClick}\r\n      />\r\n    ) : index === 1 ? (\r\n      <SurveyPageComp\r\n        allRecipes={allRecipes}\r\n        currentRecipe={currentRecipe}\r\n        handleClick={handleClick}\r\n        similarRecipes={similar_recipes}\r\n        submitSurvey={submitSurvey}\r\n        tempCurrentRecipe={\r\n          tempCurrentRecipe ? tempCurrentRecipe : currentRecipe\r\n        }\r\n      />\r\n    ) : index === 2 ? (\r\n      <View>\r\n        <span>Thank you for participating!</span>\r\n      </View>\r\n    ) : (\r\n      <div>Current Recipe isn't set. Please contact Carson (385) 244-6611</div>\r\n    )\r\n  ) : (\r\n    <div>Index doesn't equal -1. Please contact Carson (385) 244-6611</div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}