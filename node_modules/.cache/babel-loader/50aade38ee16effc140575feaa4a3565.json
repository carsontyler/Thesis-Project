{"ast":null,"code":"import _slicedToArray from\"C:\\\\inetpub\\\\wwwroot\\\\Thesis-Project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import _ from\"lodash\";import{View}from\"react-native\";import\"./homepage.css\";import{DisclosureAndDirectionsComp}from\"../../components/DisclosureAndDirectionsComp\";import{MainPageComp}from\"../../components/MainPageComp\";import{SurveyPageComp}from\"../../components/SurveyPageComp\";var mysql=require('mysql');var breakfast_recipes=require(\"./../../data/breakfast_recipes.json\");var dessert_recipes=require(\"./../../data/dessert_recipes.json\");var dinner_recipes=require(\"./../../data/dinner_recipes.json\");var gluten_free_recipes=require(\"./../../data/gluten_free_recipes.json\");var side_recipes=require(\"./../../data/side_recipes.json\");export var HomePage=function HomePage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allRecipes=_useState2[0],setRecipes=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),mainRecipes=_useState4[0],setMainRecipes=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),currentRecipe=_useState6[0],setCurrentRecipe=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),tempCurrentRecipe=_useState8[0],setTempCurrentRecipe=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),groupId=_useState10[0],setGroupId=_useState10[1];var _useState11=useState(2),_useState12=_slicedToArray(_useState11,2),index=_useState12[0],setIndex=_useState12[1];///// TODO: CHANGE THIS TO -1\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),directionsAccepted=_useState14[0],setDirectionsAccepted=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),similar_recipes=_useState16[0],setSimilarRecipes=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),certain_recipes=_useState18[0],setCertainRecipes=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),uncertain_recipes=_useState20[0],setUncertainRecipes=_useState20[1];var con=mysql.createConnection({host:\"http://sql3.freemysqlhosting.ne:3306/\",user:\"sql3361360\",password:\"kd2SpXjI24\",database:\"sql3361360\"});var scenarios=[\"You are preparing breakfast for your family one morning. Of the options presented, choose the recipe that you are most likely to make.\",\"You have been invited to a work party and asked to bring a dessert. Of the options presented, chose the recipe that you are most likely to bring.\",\"You have been invited to a neighborhood block party and asked to bring a main dish for dinner. Of the options presented, choose the recipe that you are most likely to bring.\",\"You are hosting a get-together with your friends, one of whom is gluten-free. Of the options presented, choose the recipe that you are most likely to make.\",\"You are attending a New Year's Eve party and are asked to bring a side dish. Of the options presented, choose the recipe that you are most likely to bring.\"];var handleClick=function handleClick(rcp){if(index===1)setTempCurrentRecipe(rcp);else if(index===0)setCurrentRecipe(rcp);if(rcp.most_similar.length>0){setSimilarRecipes(_.filter(allRecipes,function(rcp){return currentRecipe?currentRecipe.most_similar.includes(rcp.id):false;}));setCertainRecipes(_.filter(similar_recipes,function(rcp){return rcp.type===\"certain\";}));setUncertainRecipes(_.filter(similar_recipes,function(rcp){return rcp.type===\"uncertain\";}));}};var handleSubmit=function handleSubmit(event){setIndex(0);if(groupId===5)setIndex(2);};var selectRecipeClick=function selectRecipeClick(){var temp=++index;if(temp===1)setTempCurrentRecipe(currentRecipe);if(temp>1){temp=0;setGroupId(++groupId);if(groupId===5)temp=2;}setIndex(temp);};var directionsCheckboxChange=function directionsCheckboxChange(event){setDirectionsAccepted(event.target.checked);};var submitSurvey=function submitSurvey(event){selectRecipeClick();};var refresh=function refresh(){var recipes=[];if(groupId===0)recipes=breakfast_recipes;else if(groupId===1)recipes=dessert_recipes;else if(groupId===2)recipes=dinner_recipes;else if(groupId===3)recipes=gluten_free_recipes;else if(groupId===4)recipes=side_recipes;setRecipes(recipes);var mainRecipes=_.filter(recipes,function(recipe){return recipe.type===\"main\";});setMainRecipes(mainRecipes);setCurrentRecipe(mainRecipes[0]);if(currentRecipe&&currentRecipe.most_similar.length>0){setSimilarRecipes(_.filter(recipes,function(rcp){console.log(rcp.id);console.log(currentRecipe?currentRecipe.most_similar.includes(rcp.id):false);return currentRecipe?currentRecipe.most_similar.includes(rcp.id):false;}));setCertainRecipes(_.filter(similar_recipes,function(rcp){return rcp.type===\"certain\";}));setUncertainRecipes(_.filter(similar_recipes,function(rcp){return rcp.type===\"uncertain\";}));}if(index===2){con.connect(function(err){if(err)throw err;console.log(\"Connected!\");var sql=\"SELECT * FROM Data\";/////////////// TODO: CHANGE THIS\ncon.squery(sql,function(erro,result){if(erro)throw erro;console.log(\"Query success! \"+result);});});}};useEffect(function(){refresh();},[]);useEffect(function(){refresh();},[directionsAccepted,index]);return index===-1?/*#__PURE__*/React.createElement(DisclosureAndDirectionsComp,{directionsAccepted:directionsAccepted,directionsCheckboxChange:directionsCheckboxChange,handleSubmit:handleSubmit,refresh:refresh}):currentRecipe?index===0?/*#__PURE__*/React.createElement(MainPageComp,{currentRecipe:currentRecipe,handleClick:handleClick,mainRecipes:mainRecipes,selectRecipeClick:selectRecipeClick,scenario:scenarios[groupId]}):index===1?/*#__PURE__*/React.createElement(SurveyPageComp,{allRecipes:allRecipes,currentRecipe:currentRecipe,handleClick:handleClick,similarRecipes:similar_recipes,submitSurvey:submitSurvey,tempCurrentRecipe:tempCurrentRecipe?tempCurrentRecipe:currentRecipe}):index>1?/*#__PURE__*/React.createElement(View,null,/*#__PURE__*/React.createElement(\"span\",null,\"Thank you for participating!\")):/*#__PURE__*/React.createElement(\"div\",null,\"Current Recipe isn't set. Please contact Carson (385) 244-6611\"):/*#__PURE__*/React.createElement(\"div\",null,\"Index doesn't equal -1. Please contact Carson (385) 244-6611\");};export default HomePage;","map":{"version":3,"sources":["C:/inetpub/wwwroot/Thesis-Project/src/views/HomePage/HomePage.tsx"],"names":["React","useEffect","useState","_","View","DisclosureAndDirectionsComp","MainPageComp","SurveyPageComp","mysql","require","breakfast_recipes","dessert_recipes","dinner_recipes","gluten_free_recipes","side_recipes","HomePage","allRecipes","setRecipes","mainRecipes","setMainRecipes","currentRecipe","setCurrentRecipe","tempCurrentRecipe","setTempCurrentRecipe","groupId","setGroupId","index","setIndex","directionsAccepted","setDirectionsAccepted","similar_recipes","setSimilarRecipes","certain_recipes","setCertainRecipes","uncertain_recipes","setUncertainRecipes","con","createConnection","host","user","password","database","scenarios","handleClick","rcp","most_similar","length","filter","includes","id","type","handleSubmit","event","selectRecipeClick","temp","directionsCheckboxChange","target","checked","submitSurvey","refresh","recipes","recipe","console","log","connect","err","sql","squery","erro","result"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport _ from \"lodash\";\r\nimport { View, Button } from \"react-native\";\r\nimport \"./homepage.css\";\r\nimport { DisclosureAndDirectionsComp } from \"../../components/DisclosureAndDirectionsComp\";\r\nimport { MainPageComp } from \"../../components/MainPageComp\";\r\nimport { SurveyPageComp } from \"../../components/SurveyPageComp\";\r\nvar mysql = require('mysql')\r\n\r\nexport interface Recipe {\r\n  id: number;\r\n  type: string;\r\n  recipe: string;\r\n  title: string;\r\n  most_similar: [number];\r\n  ratings: number;\r\n  stars: number;\r\n  image: string;\r\n  ingredients: [string];\r\n  directions: [string];\r\n}\r\n\r\nconst breakfast_recipes = require(\"./../../data/breakfast_recipes.json\");\r\nconst dessert_recipes = require(\"./../../data/dessert_recipes.json\");\r\nconst dinner_recipes = require(\"./../../data/dinner_recipes.json\");\r\nconst gluten_free_recipes = require(\"./../../data/gluten_free_recipes.json\");\r\nconst side_recipes = require(\"./../../data/side_recipes.json\");\r\n\r\nexport const HomePage: React.FC = () => {\r\n  const [allRecipes, setRecipes] = useState<Recipe[]>([]);\r\n  const [mainRecipes, setMainRecipes] = useState<Recipe[]>([]);\r\n  let [currentRecipe, setCurrentRecipe] = useState<Recipe>();\r\n  let [tempCurrentRecipe, setTempCurrentRecipe] = useState<Recipe>();\r\n  let [groupId, setGroupId] = useState(0);\r\n  let [index, setIndex] = useState(2); ///// TODO: CHANGE THIS TO -1\r\n  let [directionsAccepted, setDirectionsAccepted] = useState(false);\r\n\r\n  let [similar_recipes, setSimilarRecipes] = useState<Recipe[]>([]);\r\n  let [certain_recipes, setCertainRecipes] = useState<Recipe[]>([]);\r\n  let [uncertain_recipes, setUncertainRecipes] = useState<Recipe[]>([]);\r\n  var con = mysql.createConnection({\r\n    host: \"http://sql3.freemysqlhosting.ne:3306/\",\r\n    user: \"sql3361360\",\r\n    password: \"kd2SpXjI24\",\r\n    database: \"sql3361360\",\r\n  });\r\n\r\n  const scenarios = [\"You are preparing breakfast for your family one morning. Of the options presented, choose the recipe that you are most likely to make.\",\r\n                     \"You have been invited to a work party and asked to bring a dessert. Of the options presented, chose the recipe that you are most likely to bring.\",\r\n                     \"You have been invited to a neighborhood block party and asked to bring a main dish for dinner. Of the options presented, choose the recipe that you are most likely to bring.\",\r\n                     \"You are hosting a get-together with your friends, one of whom is gluten-free. Of the options presented, choose the recipe that you are most likely to make.\",\r\n                     \"You are attending a New Year's Eve party and are asked to bring a side dish. Of the options presented, choose the recipe that you are most likely to bring.\"]\r\n\r\n  interface Recipe {\r\n    id: number;\r\n    type: string;\r\n    recipe: string;\r\n    title: string;\r\n    most_similar: [number];\r\n    ratings: number;\r\n    stars: number;\r\n    image: string;\r\n    ingredients: [string];\r\n    directions: [string];\r\n  }\r\n\r\n  const handleClick = (rcp: Recipe) => {\r\n    if (index === 1) setTempCurrentRecipe(rcp);\r\n    else if (index === 0) setCurrentRecipe(rcp);\r\n    if (rcp.most_similar.length > 0) {\r\n      setSimilarRecipes(\r\n        _.filter(allRecipes, (rcp: Recipe) => {\r\n          return currentRecipe\r\n            ? currentRecipe.most_similar.includes(rcp.id)\r\n            : false;\r\n        })\r\n      );\r\n      setCertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"certain\";\r\n        })\r\n      );\r\n      setUncertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"uncertain\";\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (event: any) => {\r\n    setIndex(0);\r\n    if (groupId === 5) setIndex(2);\r\n  };\r\n\r\n  const selectRecipeClick = () => {\r\n    let temp = ++index;\r\n    if (temp === 1) setTempCurrentRecipe(currentRecipe);\r\n    if (temp > 1) {\r\n      temp = 0;\r\n      setGroupId(++groupId);\r\n      if (groupId === 5) temp = 2;\r\n    }\r\n    setIndex(temp);\r\n  };\r\n\r\n  const directionsCheckboxChange = (event: any) => {\r\n    setDirectionsAccepted(event.target.checked);\r\n  };\r\n\r\n  const submitSurvey = (event: any) => {\r\n    selectRecipeClick();\r\n  };\r\n\r\n  const refresh = () => {\r\n    let recipes: Recipe[] = [];\r\n\r\n    if (groupId === 0) recipes = breakfast_recipes;\r\n    else if (groupId === 1) recipes = dessert_recipes;\r\n    else if (groupId === 2) recipes = dinner_recipes;\r\n    else if (groupId === 3) recipes = gluten_free_recipes;\r\n    else if (groupId === 4) recipes = side_recipes;\r\n\r\n    setRecipes(recipes);\r\n\r\n    let mainRecipes = _.filter(recipes, (recipe: Recipe) => {\r\n      return recipe.type === \"main\";\r\n    });\r\n\r\n    setMainRecipes(mainRecipes);\r\n    setCurrentRecipe(mainRecipes[0]);\r\n\r\n    if (currentRecipe && currentRecipe.most_similar.length > 0) {\r\n      setSimilarRecipes(\r\n        _.filter(recipes, (rcp: Recipe) => {\r\n          console.log(rcp.id);\r\n          console.log(\r\n            currentRecipe ? currentRecipe.most_similar.includes(rcp.id) : false\r\n          );\r\n          return currentRecipe\r\n            ? currentRecipe.most_similar.includes(rcp.id)\r\n            : false;\r\n        })\r\n      );\r\n      setCertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"certain\";\r\n        })\r\n      );\r\n      setUncertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"uncertain\";\r\n        })\r\n      );\r\n    }\r\n\r\n    if (index === 2) { \r\n      con.connect(function(err: any) {\r\n        if (err) throw err;\r\n\r\n        console.log(\"Connected!\");\r\n        var sql = \"SELECT * FROM Data\"; /////////////// TODO: CHANGE THIS\r\n        con.squery(sql, function (erro: any, result: any) {\r\n          if (erro) throw erro;\r\n          console.log(\"Query success! \" + result);\r\n        })\r\n      })\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, [directionsAccepted, index]);\r\n\r\n  return index === -1 ? (\r\n    <DisclosureAndDirectionsComp\r\n      directionsAccepted={directionsAccepted}\r\n      directionsCheckboxChange={directionsCheckboxChange}\r\n      handleSubmit={handleSubmit}\r\n      refresh={refresh}\r\n    />\r\n  ) : currentRecipe ? (\r\n    index === 0 ? (\r\n      <MainPageComp\r\n        currentRecipe={currentRecipe}\r\n        handleClick={handleClick}\r\n        mainRecipes={mainRecipes}\r\n        selectRecipeClick={selectRecipeClick}\r\n        scenario={scenarios[groupId]}\r\n      />\r\n    ) : index === 1 ? (\r\n      <SurveyPageComp\r\n        allRecipes={allRecipes}\r\n        currentRecipe={currentRecipe}\r\n        handleClick={handleClick}\r\n        similarRecipes={similar_recipes}\r\n        submitSurvey={submitSurvey}\r\n        tempCurrentRecipe={\r\n          tempCurrentRecipe ? tempCurrentRecipe : currentRecipe\r\n        }\r\n      />\r\n    ) : index > 1 ? (\r\n      <View>\r\n        <span>Thank you for participating!</span>\r\n      </View>\r\n    ) : (\r\n      <div>Current Recipe isn't set. Please contact Carson (385) 244-6611</div>\r\n    )\r\n  ) : (\r\n    <div>Index doesn't equal -1. Please contact Carson (385) 244-6611</div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}