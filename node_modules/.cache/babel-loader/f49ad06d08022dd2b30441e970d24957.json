{"ast":null,"code":"import _slicedToArray from \"C:\\\\inetpub\\\\wwwroot\\\\Thesis-Project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\inetpub\\\\wwwroot\\\\Thesis-Project\\\\src\\\\views\\\\HomePage\\\\HomePage.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport _ from \"lodash\";\nimport { View } from \"react-native\";\nimport \"./homepage.css\";\nimport { DisclosureAndDirectionsComp } from \"../../components/DisclosureAndDirectionsComp\";\nimport { MainPageComp } from \"../../components/MainPageComp\";\nimport { SurveyPageComp } from \"../../components/SurveyPageComp\";\n\nvar mysql = require('mysql');\n\nconst breakfast_recipes = require(\"./../../data/breakfast_recipes.json\");\n\nconst dessert_recipes = require(\"./../../data/dessert_recipes.json\");\n\nconst dinner_recipes = require(\"./../../data/dinner_recipes.json\");\n\nconst gluten_free_recipes = require(\"./../../data/gluten_free_recipes.json\");\n\nconst side_recipes = require(\"./../../data/side_recipes.json\");\n\nexport const HomePage = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        allRecipes = _useState2[0],\n        setRecipes = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        mainRecipes = _useState4[0],\n        setMainRecipes = _useState4[1];\n\n  let _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentRecipe = _useState6[0],\n      setCurrentRecipe = _useState6[1];\n\n  let _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tempCurrentRecipe = _useState8[0],\n      setTempCurrentRecipe = _useState8[1];\n\n  let _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      groupId = _useState10[0],\n      setGroupId = _useState10[1];\n\n  let _useState11 = useState(2),\n      _useState12 = _slicedToArray(_useState11, 2),\n      index = _useState12[0],\n      setIndex = _useState12[1]; ///// TODO: CHANGE THIS TO -1\n\n\n  let _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      directionsAccepted = _useState14[0],\n      setDirectionsAccepted = _useState14[1];\n\n  let _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      similar_recipes = _useState16[0],\n      setSimilarRecipes = _useState16[1];\n\n  let _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      certain_recipes = _useState18[0],\n      setCertainRecipes = _useState18[1];\n\n  let _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      uncertain_recipes = _useState20[0],\n      setUncertainRecipes = _useState20[1];\n\n  var con = mysql.createConnection({\n    host: \"http://sql3.freemysqlhosting.ne:3306/\",\n    user: \"sql3361360\",\n    password: \"kd2SpXjI24\",\n    database: \"sql3361360\"\n  });\n  const scenarios = [\"You are preparing breakfast for your family one morning. Of the options presented, choose the recipe that you are most likely to make.\", \"You have been invited to a work party and asked to bring a dessert. Of the options presented, chose the recipe that you are most likely to bring.\", \"You have been invited to a neighborhood block party and asked to bring a main dish for dinner. Of the options presented, choose the recipe that you are most likely to bring.\", \"You are hosting a get-together with your friends, one of whom is gluten-free. Of the options presented, choose the recipe that you are most likely to make.\", \"You are attending a New Year's Eve party and are asked to bring a side dish. Of the options presented, choose the recipe that you are most likely to bring.\"];\n\n  const handleClick = rcp => {\n    if (index === 1) setTempCurrentRecipe(rcp);else if (index === 0) setCurrentRecipe(rcp);\n\n    if (rcp.most_similar.length > 0) {\n      setSimilarRecipes(_.filter(allRecipes, rcp => {\n        return currentRecipe ? currentRecipe.most_similar.includes(rcp.id) : false;\n      }));\n      setCertainRecipes(_.filter(similar_recipes, rcp => {\n        return rcp.type === \"certain\";\n      }));\n      setUncertainRecipes(_.filter(similar_recipes, rcp => {\n        return rcp.type === \"uncertain\";\n      }));\n    }\n  };\n\n  const handleSubmit = event => {\n    setIndex(0);\n    if (groupId === 5) setIndex(2);\n  };\n\n  const selectRecipeClick = () => {\n    let temp = ++index;\n    if (temp === 1) setTempCurrentRecipe(currentRecipe);\n\n    if (temp > 1) {\n      temp = 0;\n      setGroupId(++groupId);\n      if (groupId === 5) temp = 2;\n    }\n\n    setIndex(temp);\n  };\n\n  const directionsCheckboxChange = event => {\n    setDirectionsAccepted(event.target.checked);\n  };\n\n  const submitSurvey = event => {\n    selectRecipeClick();\n  };\n\n  const refresh = () => {\n    let recipes = [];\n    if (groupId === 0) recipes = breakfast_recipes;else if (groupId === 1) recipes = dessert_recipes;else if (groupId === 2) recipes = dinner_recipes;else if (groupId === 3) recipes = gluten_free_recipes;else if (groupId === 4) recipes = side_recipes;\n    setRecipes(recipes);\n\n    let mainRecipes = _.filter(recipes, recipe => {\n      return recipe.type === \"main\";\n    });\n\n    setMainRecipes(mainRecipes);\n    setCurrentRecipe(mainRecipes[0]);\n\n    if (currentRecipe && currentRecipe.most_similar.length > 0) {\n      setSimilarRecipes(_.filter(recipes, rcp => {\n        console.log(rcp.id);\n        console.log(currentRecipe ? currentRecipe.most_similar.includes(rcp.id) : false);\n        return currentRecipe ? currentRecipe.most_similar.includes(rcp.id) : false;\n      }));\n      setCertainRecipes(_.filter(similar_recipes, rcp => {\n        return rcp.type === \"certain\";\n      }));\n      setUncertainRecipes(_.filter(similar_recipes, rcp => {\n        return rcp.type === \"uncertain\";\n      }));\n    }\n\n    if (index === 2) {\n      con.connect(function (err) {\n        if (err) throw err;\n        console.log(\"Connected!\");\n        var sql = \"SELECT * FROM Data\"; /////////////// TODO: CHANGE THIS\n\n        con.squery(sql, function (erro, result) {\n          if (erro) throw erro;\n          console.log(\"Query success! \" + result);\n        });\n      });\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, []);\n  useEffect(() => {\n    refresh();\n  }, [directionsAccepted, index]);\n  return index === -1 ? /*#__PURE__*/React.createElement(DisclosureAndDirectionsComp, {\n    directionsAccepted: directionsAccepted,\n    directionsCheckboxChange: directionsCheckboxChange,\n    handleSubmit: handleSubmit,\n    refresh: refresh,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }\n  }) : currentRecipe ? index === 0 ? /*#__PURE__*/React.createElement(MainPageComp, {\n    currentRecipe: currentRecipe,\n    handleClick: handleClick,\n    mainRecipes: mainRecipes,\n    selectRecipeClick: selectRecipeClick,\n    scenario: scenarios[groupId],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }) : index === 1 ? /*#__PURE__*/React.createElement(SurveyPageComp, {\n    allRecipes: allRecipes,\n    currentRecipe: currentRecipe,\n    handleClick: handleClick,\n    similarRecipes: similar_recipes,\n    submitSurvey: submitSurvey,\n    tempCurrentRecipe: tempCurrentRecipe ? tempCurrentRecipe : currentRecipe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }) : index > 1 ? /*#__PURE__*/React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, \"Thank you for participating!\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }, \"Current Recipe isn't set. Please contact Carson (385) 244-6611\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }\n  }, \"Index doesn't equal -1. Please contact Carson (385) 244-6611\");\n};\nexport default HomePage;","map":{"version":3,"sources":["C:/inetpub/wwwroot/Thesis-Project/src/views/HomePage/HomePage.tsx"],"names":["React","useEffect","useState","_","View","DisclosureAndDirectionsComp","MainPageComp","SurveyPageComp","mysql","require","breakfast_recipes","dessert_recipes","dinner_recipes","gluten_free_recipes","side_recipes","HomePage","allRecipes","setRecipes","mainRecipes","setMainRecipes","currentRecipe","setCurrentRecipe","tempCurrentRecipe","setTempCurrentRecipe","groupId","setGroupId","index","setIndex","directionsAccepted","setDirectionsAccepted","similar_recipes","setSimilarRecipes","certain_recipes","setCertainRecipes","uncertain_recipes","setUncertainRecipes","con","createConnection","host","user","password","database","scenarios","handleClick","rcp","most_similar","length","filter","includes","id","type","handleSubmit","event","selectRecipeClick","temp","directionsCheckboxChange","target","checked","submitSurvey","refresh","recipes","recipe","console","log","connect","err","sql","squery","erro","result"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport _ from \"lodash\";\r\nimport { View, Button } from \"react-native\";\r\nimport \"./homepage.css\";\r\nimport { DisclosureAndDirectionsComp } from \"../../components/DisclosureAndDirectionsComp\";\r\nimport { MainPageComp } from \"../../components/MainPageComp\";\r\nimport { SurveyPageComp } from \"../../components/SurveyPageComp\";\r\nvar mysql = require('mysql')\r\n\r\nexport interface Recipe {\r\n  id: number;\r\n  type: string;\r\n  recipe: string;\r\n  title: string;\r\n  most_similar: [number];\r\n  ratings: number;\r\n  stars: number;\r\n  image: string;\r\n  ingredients: [string];\r\n  directions: [string];\r\n}\r\n\r\nconst breakfast_recipes = require(\"./../../data/breakfast_recipes.json\");\r\nconst dessert_recipes = require(\"./../../data/dessert_recipes.json\");\r\nconst dinner_recipes = require(\"./../../data/dinner_recipes.json\");\r\nconst gluten_free_recipes = require(\"./../../data/gluten_free_recipes.json\");\r\nconst side_recipes = require(\"./../../data/side_recipes.json\");\r\n\r\nexport const HomePage: React.FC = () => {\r\n  const [allRecipes, setRecipes] = useState<Recipe[]>([]);\r\n  const [mainRecipes, setMainRecipes] = useState<Recipe[]>([]);\r\n  let [currentRecipe, setCurrentRecipe] = useState<Recipe>();\r\n  let [tempCurrentRecipe, setTempCurrentRecipe] = useState<Recipe>();\r\n  let [groupId, setGroupId] = useState(0);\r\n  let [index, setIndex] = useState(2); ///// TODO: CHANGE THIS TO -1\r\n  let [directionsAccepted, setDirectionsAccepted] = useState(false);\r\n\r\n  let [similar_recipes, setSimilarRecipes] = useState<Recipe[]>([]);\r\n  let [certain_recipes, setCertainRecipes] = useState<Recipe[]>([]);\r\n  let [uncertain_recipes, setUncertainRecipes] = useState<Recipe[]>([]);\r\n  var con = mysql.createConnection({\r\n    host: \"http://sql3.freemysqlhosting.ne:3306/\",\r\n    user: \"sql3361360\",\r\n    password: \"kd2SpXjI24\",\r\n    database: \"sql3361360\",\r\n  });\r\n\r\n  const scenarios = [\"You are preparing breakfast for your family one morning. Of the options presented, choose the recipe that you are most likely to make.\",\r\n                     \"You have been invited to a work party and asked to bring a dessert. Of the options presented, chose the recipe that you are most likely to bring.\",\r\n                     \"You have been invited to a neighborhood block party and asked to bring a main dish for dinner. Of the options presented, choose the recipe that you are most likely to bring.\",\r\n                     \"You are hosting a get-together with your friends, one of whom is gluten-free. Of the options presented, choose the recipe that you are most likely to make.\",\r\n                     \"You are attending a New Year's Eve party and are asked to bring a side dish. Of the options presented, choose the recipe that you are most likely to bring.\"]\r\n\r\n  interface Recipe {\r\n    id: number;\r\n    type: string;\r\n    recipe: string;\r\n    title: string;\r\n    most_similar: [number];\r\n    ratings: number;\r\n    stars: number;\r\n    image: string;\r\n    ingredients: [string];\r\n    directions: [string];\r\n  }\r\n\r\n  const handleClick = (rcp: Recipe) => {\r\n    if (index === 1) setTempCurrentRecipe(rcp);\r\n    else if (index === 0) setCurrentRecipe(rcp);\r\n    if (rcp.most_similar.length > 0) {\r\n      setSimilarRecipes(\r\n        _.filter(allRecipes, (rcp: Recipe) => {\r\n          return currentRecipe\r\n            ? currentRecipe.most_similar.includes(rcp.id)\r\n            : false;\r\n        })\r\n      );\r\n      setCertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"certain\";\r\n        })\r\n      );\r\n      setUncertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"uncertain\";\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (event: any) => {\r\n    setIndex(0);\r\n    if (groupId === 5) setIndex(2);\r\n  };\r\n\r\n  const selectRecipeClick = () => {\r\n    let temp = ++index;\r\n    if (temp === 1) setTempCurrentRecipe(currentRecipe);\r\n    if (temp > 1) {\r\n      temp = 0;\r\n      setGroupId(++groupId);\r\n      if (groupId === 5) temp = 2;\r\n    }\r\n    setIndex(temp);\r\n  };\r\n\r\n  const directionsCheckboxChange = (event: any) => {\r\n    setDirectionsAccepted(event.target.checked);\r\n  };\r\n\r\n  const submitSurvey = (event: any) => {\r\n    selectRecipeClick();\r\n  };\r\n\r\n  const refresh = () => {\r\n    let recipes: Recipe[] = [];\r\n\r\n    if (groupId === 0) recipes = breakfast_recipes;\r\n    else if (groupId === 1) recipes = dessert_recipes;\r\n    else if (groupId === 2) recipes = dinner_recipes;\r\n    else if (groupId === 3) recipes = gluten_free_recipes;\r\n    else if (groupId === 4) recipes = side_recipes;\r\n\r\n    setRecipes(recipes);\r\n\r\n    let mainRecipes = _.filter(recipes, (recipe: Recipe) => {\r\n      return recipe.type === \"main\";\r\n    });\r\n\r\n    setMainRecipes(mainRecipes);\r\n    setCurrentRecipe(mainRecipes[0]);\r\n\r\n    if (currentRecipe && currentRecipe.most_similar.length > 0) {\r\n      setSimilarRecipes(\r\n        _.filter(recipes, (rcp: Recipe) => {\r\n          console.log(rcp.id);\r\n          console.log(\r\n            currentRecipe ? currentRecipe.most_similar.includes(rcp.id) : false\r\n          );\r\n          return currentRecipe\r\n            ? currentRecipe.most_similar.includes(rcp.id)\r\n            : false;\r\n        })\r\n      );\r\n      setCertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"certain\";\r\n        })\r\n      );\r\n      setUncertainRecipes(\r\n        _.filter(similar_recipes, (rcp: Recipe) => {\r\n          return rcp.type === \"uncertain\";\r\n        })\r\n      );\r\n    }\r\n\r\n    if (index === 2) { \r\n      con.connect(function(err: any) {\r\n        if (err) throw err;\r\n\r\n        console.log(\"Connected!\");\r\n        var sql = \"SELECT * FROM Data\"; /////////////// TODO: CHANGE THIS\r\n        con.squery(sql, function (erro: any, result: any) {\r\n          if (erro) throw erro;\r\n          console.log(\"Query success! \" + result);\r\n        })\r\n      })\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, [directionsAccepted, index]);\r\n\r\n  return index === -1 ? (\r\n    <DisclosureAndDirectionsComp\r\n      directionsAccepted={directionsAccepted}\r\n      directionsCheckboxChange={directionsCheckboxChange}\r\n      handleSubmit={handleSubmit}\r\n      refresh={refresh}\r\n    />\r\n  ) : currentRecipe ? (\r\n    index === 0 ? (\r\n      <MainPageComp\r\n        currentRecipe={currentRecipe}\r\n        handleClick={handleClick}\r\n        mainRecipes={mainRecipes}\r\n        selectRecipeClick={selectRecipeClick}\r\n        scenario={scenarios[groupId]}\r\n      />\r\n    ) : index === 1 ? (\r\n      <SurveyPageComp\r\n        allRecipes={allRecipes}\r\n        currentRecipe={currentRecipe}\r\n        handleClick={handleClick}\r\n        similarRecipes={similar_recipes}\r\n        submitSurvey={submitSurvey}\r\n        tempCurrentRecipe={\r\n          tempCurrentRecipe ? tempCurrentRecipe : currentRecipe\r\n        }\r\n      />\r\n    ) : index > 1 ? (\r\n      <View>\r\n        <span>Thank you for participating!</span>\r\n      </View>\r\n    ) : (\r\n      <div>Current Recipe isn't set. Please contact Carson (385) 244-6611</div>\r\n    )\r\n  ) : (\r\n    <div>Index doesn't equal -1. Please contact Carson (385) 244-6611</div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}